<!-- Generated by SpecStory -->

# Survey Schema Alignment Discussion (2025-04-27 12:44:43)

_**User**_

ok, after execution I get this 
schema 

"""Represents a block or section within a survey."""
type Block {
  id: ID
  name: String
  orderIndex: Int
  questions: [Question!]
  settings: [BlockSetting!]
  skipLogic: String
  survey: Survey
  surveyId: Int
  translations: [BlockTranslation!]
}

"""Settings specific to a block, represented as key-value pairs."""
type BlockSetting {
  block: Block
  blockId: Int
  settingKey: String
  settingValue: String
}

"""Translations for a Block's fields."""
type BlockTranslation {
  block: Block
  blockId: Int
  languageCode: String
  name: String
}

"""
Represents a single choice item for a question (e.g., an option in a radio button list).
"""
type ChoiceListItem {
  id: ID
  position: Int
  question: Question
  questionId: Int
  settingExclusive: Boolean
  settingVisible: Boolean
  translations: [ChoiceListItemTranslation!]
  value: String
}

"""Translations for a ChoiceListItem's fields."""
type ChoiceListItemTranslation {
  choiceListItem: ChoiceListItem
  choiceListItemId: Int
  label: String
  languageCode: String
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

"""The root query type"""
type Query {
  surveys: [Survey!]
}

"""Represents a question within a survey block."""
type Question {
  block: Block
  blockId: Int
  choiceItems: [ChoiceListItem!]
  id: ID
  isPageBreak: Boolean
  name: String
  orderIndex: Int
  settings: [QuestionSetting!]
  translations: [QuestionTranslation!]
  type: String
}

"""Settings specific to a question, represented as key-value pairs."""
type QuestionSetting {
  question: Question
  questionId: Int
  settingKey: String
  settingValue: String
}

"""Translations for a Question's fields."""
type QuestionTranslation {
  languageCode: String
  question: Question
  questionId: Int
  text: String
}

type Survey {
  blocks: [Block!]
  configVersion: Int
  createdAt: DateTime
  defaultLanguage: String
  id: ID
  languages: [SurveyLanguage!]
  name: String
  settings: [SurveySetting!]
  translations: [SurveyTranslation!]
}

"""Languages available for a specific survey."""
type SurveyLanguage {
  languageCode: String
  survey: Survey
  surveyId: Int
}

"""Settings specific to a survey, represented as key-value pairs."""
type SurveySetting {
  settingKey: String
  settingValue: String
  survey: Survey
  surveyId: Int
}

"""Translations for a Survey's fields."""
type SurveyTranslation {
  languageCode: String
  name: String
  survey: Survey
  surveyId: Int
}

is it alliend with @schema.prisma 

---

_**Assistant**_



---

Okay, I will ensure I only propose one change at a time.

Based on my comparison between the GraphQL schema you provided and the `server/prisma/schema.prisma` file, they are mostly aligned. Pothos handles the mapping from `snake_case` in Prisma to `camelCase` in GraphQL, and the types and relations generally match up.

However, there are two discrepancies:

1.  **Missing `schema_version` field**: The `Survey` model in `schema.prisma` has a `schema_version` field ( `schema_version String?`), but this field is not exposed in the `Survey` type definition within `server/src/builder.ts` and is therefore missing from your GraphQL schema.
2.  **Missing `use_s2` field**: The `Survey` model in `schema.prisma` has a `use_s2` field (`use_s2 Boolean`). This field *is* present in `server/src/builder.ts` but is currently commented out (`// useS2: t.exposeBoolean('use_s2'),`). This is why it's missing from your GraphQL schema.

Other than these two fields in the `Survey` type, the rest of the GraphQL schema appears consistent with the Prisma schema definitions and the way they are exposed in `server/src/builder.ts`. Nullable fields in Prisma are correctly represented as nullable in the GraphQL schema (e.g., `settingValue: String` is nullable, whereas `settingValue: String!` would be non-nullable).

---

